# DE-2026-001: Add Kernel::sharpen() to Vision Module

**Version Bump:** minor (0.2.2 → 0.3.0)
**Impact Tier:** T2
**Status:** completed

---

## Justification

The vision module currently provides several convolution kernels (Gaussian, Sobel, Laplacian, Prewitt, box blur) but lacks a sharpening filter. Image sharpening is a fundamental operation in computer vision for edge enhancement and detail recovery. Adding `Kernel::sharpen()` completes the basic kernel toolkit and follows established patterns in the codebase.

---

## Avoidance Analysis (T2+ only)

| Alternative | Rejected Because |
|-------------|------------------|
| Use custom kernel API | Requires user to know sharpen coefficients; less discoverable |
| Add as example only | Not reusable; doesn't follow existing kernel pattern |
| Skip implementation | Leaves gap in standard kernel set; commonly needed operation |

---

## Scope

### Files to Modify
- [x] `src/vision/kernel.rs` - Add `sharpen()` method + unit test
- [x] `docs/CHANGELOG.md` - Add 0.3.0 version entry
- [x] `docs/API_TREE.md` - Add sharpen to Kernel table
- [x] `Cargo.toml` - Bump version to 0.3.0

### Files to Create
- [x] `docs/events/DE-2026-001.md` - This document

---

## Document Tasks

### plan_expert
- [x] Create docs/events/DE-2026-001.md

### test_expert
- [x] Create/update tests with metadata header
- [x] Add @math_verified: false to new tests

### math_expert
- [x] Review tests
- [x] Set @math_verified: true
- [x] Add @properties_checked

### code_expert
- [x] Implement changes
- [x] Update @version, @event in source metadata

### doc_expert
- [x] Add CHANGELOG entry
- [x] Update docs/API_TREE.md (new public API)

---

## Verification Gates

- [x] @math_verified: true (for numerical code)
- [x] `cargo test --all-features` passes
- [x] `cargo clippy --all-features -- -D warnings` passes
- [x] `rg "\.unwrap\(\)" src/` returns 0
- [x] Version bump matches tier

---

## Notes

**Kernel definition (3x3 sharpen filter):**
```
[[ 0, -1,  0],
 [-1,  5, -1],
 [ 0, -1,  0]]
```

**Mathematical properties to verify:**
1. **Coefficient correctness** - Center = 5, neighbors = -1, corners = 0
2. **Sum unity** - Sum of all coefficients = 1 (preserves brightness)
3. **Rotational symmetry** - 90° rotation invariant

This kernel is the identity plus Laplacian: I - (-L) = I + L, where L is the
discrete Laplacian. This amplifies the center pixel while subtracting the
local average, enhancing edges and fine details.
